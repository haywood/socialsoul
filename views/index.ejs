<!DOCTYPE html>
<html>
  <head>
    <title><%= id %></title>
    <script type='text/javascript' src='javascripts/libs/jquery-1.11.0.js'></script>
    <style>
    body {
      margin: 2px;
      padding: 0;
    }
    .row {
      clear: both;
    }
    .wrapper { 
      width: 192px; 
      height: 108px; 
      margin: 2px; 
      overflow: hidden; 
      float: left;
    }
    .scaled-frame {
      width: 1920px; 
      height: 1080px; 
      border: 0px;
      zoom: 0.1;
      -moz-transform: scale(0.1);
      -moz-transform-origin: 0 0;
      -o-transform: scale(0.1);
      -o-transform-origin: 0 0;
      -webkit-transform: scale(0.1);
      -webkit-transform-origin: 0 0;
    }
    .label {
      position: absolute;
      z-index: 1;
      font-size: 10px;
      color: white;
      font-family: monospace;
      opacity: 0.5;
    }
    @media screen and (-webkit-min-device-pixel-ratio:0) {
      .scaled-frame  { zoom: 1;  }
    }
    </style>

    <script type='text/javascript'>

      var step = 0;
      var interval, duration;
      var monitors = [[11,10,8,8,10,11],[9,6,5,4,7,9],[7,3,1,2,3,6],[4,2,0,0,1,5],[5,1,0,0,2,4],[6,3,2,1,3,7],[9,7,4,5,6,9],[11,10,8,8,10,11]];

      function updateScreens() {
        if (step*interval < duration) { // pend temp max iterations, this should be smarter
          for(var y = 0; y < monitors.length; y++) {
            for(var x = 0; x < monitors[y].length; x++) {
              var id = monitors[y][x];
              $('#img_'+y+'_'+x).attr('src', '../phantomjs/render/screen_'+id+'_'+step+'.png');
            }
          }
          step++;
        }
      }

      window.onload = function() {

        for(var y = 0; y < monitors.length; y++) {
          $('body').append('<div id="row_'+y+'" ></div>');
          for(var x = 0; x < monitors[y].length; x++) {
            var id = monitors[y][x];
            $('#row_'+y).append('<div class="wrapper"><span class="label">'+id+'</span><img id="img_'+y+'_'+x+'" class="scaled-frame" src="../phantomjs/render/screen_'+id+'_0.png" /></div>');
          }
        }

        $.getJSON('phantomjs/settings.json', function (json) {
          interval = json.interval;
          duration = json.duration;
          setInterval(updateScreens, interval);
         });        
      }
    </script>
  </head>
  <body>
  </body>
</html>